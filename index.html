<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMGEN - Steam Manifest Generator</title>
    <link rel="icon" href="https://store.steampowered.com/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0f; color: #e4e4e7; font-family: 'Inter', sans-serif; min-height: 100vh; }
        .bg-ambient { position: fixed; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; z-index: 0; }
        .bg-ambient::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(ellipse at 30% 20%, rgba(23, 93, 146, 0.12) 0%, transparent 50%), radial-gradient(ellipse at 70% 80%, rgba(102, 192, 244, 0.08) 0%, transparent 50%); animation: drift 20s ease-in-out infinite; }
        @keyframes drift { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(-2%, 2%); } }
        .header { position: relative; z-index: 10; padding: 20px 40px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.06); backdrop-filter: blur(20px); background: rgba(10,10,15,0.8); }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 42px; height: 42px; background: linear-gradient(135deg, #1a9fff 0%, #0d5c8f 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(26,159,255,0.3); }
        .logo-icon svg { width: 24px; height: 24px; fill: white; }
        .logo-text { font-size: 22px; font-weight: 700; background: linear-gradient(135deg, #1a9fff 0%, #66c0f4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header-right { display: flex; align-items: center; gap: 12px; }
        .discord-btn { display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #5865F2; color: white; text-decoration: none; border-radius: 8px; font-size: 13px; font-weight: 600; transition: all 0.3s; }
        .discord-btn:hover { background: #4752c4; transform: translateY(-1px); }
        .discord-btn svg { width: 18px; height: 18px; }
        .vip-badge { background: linear-gradient(135deg, #1a9fff 0%, #66c0f4 100%); color: #0a0a0f; padding: 6px 14px; border-radius: 20px; font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; }
        .main { position: relative; z-index: 10; max-width: 1000px; margin: 0 auto; padding: 60px 24px; }
        .hero { text-align: center; margin-bottom: 40px; }
        .hero h1 { font-size: 42px; font-weight: 700; margin-bottom: 12px; background: linear-gradient(135deg, #fff 0%, #a1a1aa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { color: #71717a; font-size: 16px; max-width: 500px; margin: 0 auto; }
        .stats { display: flex; justify-content: center; gap: 30px; margin-bottom: 40px; flex-wrap: wrap; }
        .stat { text-align: center; }
        .stat-value { font-size: 24px; font-weight: 700; color: #fff; }
        .stat-label { font-size: 10px; color: #52525b; text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }
        
        /* Tab Navigation */
        .tab-nav { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .tab-btn { padding: 12px 24px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; color: #a1a1aa; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-family: inherit; display: flex; align-items: center; gap: 8px; }
        .tab-btn:hover { background: rgba(255,255,255,0.06); }
        .tab-btn.active { background: rgba(26,159,255,0.15); border-color: rgba(26,159,255,0.4); color: #1a9fff; }
        .tab-btn svg { width: 18px; height: 18px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .search-container { margin-bottom: 25px; }
        .search-box { position: relative; max-width: 500px; margin: 0 auto; }
        .search-input { width: 100%; padding: 16px 20px 16px 50px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; color: #e4e4e7; font-size: 15px; outline: none; transition: all 0.3s; font-family: inherit; }
        .search-input:focus { border-color: rgba(26,159,255,0.5); background: rgba(255,255,255,0.05); box-shadow: 0 0 0 4px rgba(26,159,255,0.1); }
        .search-input::placeholder { color: #52525b; }
        .search-icon { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: #52525b; }
        
        .section-tabs { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
        .section-tab { padding: 8px 14px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; color: #a1a1aa; font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 6px; font-family: inherit; }
        .section-tab:hover { background: rgba(255,255,255,0.06); }
        .section-tab.active { background: rgba(26,159,255,0.15); border-color: rgba(26,159,255,0.4); color: #1a9fff; }
        .section-tab .count { background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 8px; font-size: 10px; }
        .section-tab.active .count { background: rgba(26,159,255,0.3); }
        .section-tab[data-section="valve"] { border-left: 3px solid #1a9fff; }
        .section-tab[data-section="denuvo"] { border-left: 3px solid #f59e0b; }
        .section-tab[data-section="drm-free"] { border-left: 3px solid #10b981; }
        .section-tab[data-section="custom"] { border-left: 3px solid #8b5cf6; }
        .section-tab[data-section="unavailable"] { border-left: 3px solid #ef4444; }

        .results { display: flex; flex-direction: column; gap: 10px; }
        .results-info { text-align: center; color: #52525b; font-size: 13px; margin-bottom: 15px; }
        .results-info strong { color: #1a9fff; }
        .no-results { text-align: center; padding: 60px 20px; color: #52525b; }
        
        .game-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 14px; display: flex; align-items: center; gap: 14px; transition: all 0.3s; }
        .game-card:hover { background: rgba(255,255,255,0.04); border-color: rgba(26,159,255,0.3); transform: translateY(-1px); }
        .game-card.unavailable { opacity: 0.6; border-color: rgba(239,68,68,0.2); }
        .game-card.denuvo-game { border-left: 3px solid #f59e0b; }
        .game-card.valve-game { border-left: 3px solid #1a9fff; }
        .game-card.drm-free-game { border-left: 3px solid #10b981; }
        .game-card.custom-game { border-left: 3px solid #8b5cf6; }
        
        .game-image-container { position: relative; flex-shrink: 0; }
        .game-image { width: 120px; height: 45px; border-radius: 6px; object-fit: cover; background: linear-gradient(135deg, #1a1a24 0%, #2a2a3a 100%); }
        .game-image-placeholder { width: 120px; height: 45px; border-radius: 6px; background: linear-gradient(135deg, #1a1a24 0%, #2a2a3a 100%); display: flex; align-items: center; justify-content: center; font-size: 10px; color: #52525b; text-align: center; padding: 4px; }
        .unavailable-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); border-radius: 6px; display: flex; align-items: center; justify-content: center; }
        .unavailable-badge-img { background: #ef4444; color: white; padding: 3px 8px; border-radius: 10px; font-size: 8px; font-weight: 700; text-transform: uppercase; }
        
        .game-info { flex: 1; min-width: 0; }
        .game-title { font-size: 14px; font-weight: 600; color: #fff; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin-bottom: 4px; }
        .game-badges { display: flex; gap: 4px; flex-wrap: wrap; }
        .badge { padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: 600; text-transform: uppercase; }
        .badge-valve { background: linear-gradient(135deg, #1a9fff, #66c0f4); color: #000; }
        .badge-denuvo { background: linear-gradient(135deg, #f59e0b, #d97706); color: #000; }
        .badge-drm-free { background: linear-gradient(135deg, #10b981, #059669); color: #fff; }
        .badge-custom { background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: #fff; }
        .badge-unavailable { background: rgba(239,68,68,0.2); color: #f87171; border: 1px solid rgba(239,68,68,0.3); }
        .badge-verified { background: linear-gradient(135deg, #10b981, #059669); color: #fff; }
        
        .game-meta { display: flex; gap: 12px; font-size: 11px; color: #71717a; flex-wrap: wrap; }
        .meta-value { color: #a1a1aa; font-family: monospace; background: rgba(255,255,255,0.05); padding: 1px 6px; border-radius: 3px; font-size: 10px; }
        
        .game-actions { display: flex; gap: 8px; flex-shrink: 0; }
        .download-btn { padding: 10px 18px; background: linear-gradient(135deg, #1a9fff, #0d7fd4); color: white; border: none; border-radius: 8px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 6px; font-family: inherit; }
        .download-btn:hover { transform: scale(1.02); box-shadow: 0 4px 20px rgba(26,159,255,0.4); }
        .download-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }
        .download-btn.unavailable-btn { background: #374151; cursor: not-allowed; }
        .download-btn.denuvo-btn { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .download-btn.success { background: linear-gradient(135deg, #10b981, #059669); }
        .download-btn svg { width: 14px; height: 14px; }
        .delete-btn { padding: 10px; background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.2); border-radius: 8px; color: #f87171; cursor: pointer; transition: all 0.3s; }
        .delete-btn:hover { background: rgba(239,68,68,0.2); }
        .delete-btn svg { width: 14px; height: 14px; }
        
        .spinner { width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .load-more { display: block; width: 100%; padding: 14px; margin-top: 20px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; color: #a1a1aa; font-size: 13px; cursor: pointer; transition: all 0.3s; font-family: inherit; }
        .load-more:hover { background: rgba(26,159,255,0.1); border-color: rgba(26,159,255,0.3); color: #1a9fff; }

        /* Add Game Form */
        .add-game-section { background: rgba(139,92,246,0.05); border: 1px solid rgba(139,92,246,0.1); border-radius: 16px; padding: 24px; margin-bottom: 30px; }
        .add-game-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .add-game-header h2 { font-size: 18px; font-weight: 700; color: #fff; }
        .add-game-header .icon { width: 40px; height: 40px; background: linear-gradient(135deg, #8b5cf6, #6d28d9); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .add-game-header .icon svg { width: 20px; height: 20px; fill: white; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; gap: 6px; }
        .form-group label { font-size: 12px; color: #a1a1aa; font-weight: 500; }
        .form-group input, .form-group select, .form-group textarea { padding: 12px 14px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; color: #e4e4e7; font-size: 14px; font-family: inherit; outline: none; transition: all 0.3s; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: rgba(139,92,246,0.5); background: rgba(255,255,255,0.05); }
        .form-group input::placeholder, .form-group textarea::placeholder { color: #52525b; }
        .form-group textarea { min-height: 100px; resize: vertical; font-family: monospace; font-size: 12px; }
        .form-group small { font-size: 11px; color: #52525b; }
        
        .form-actions { display: flex; gap: 12px; justify-content: flex-end; }
        .btn-add-game { padding: 12px 24px; background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-family: inherit; display: flex; align-items: center; gap: 8px; }
        .btn-add-game:hover { box-shadow: 0 4px 20px rgba(139,92,246,0.4); transform: translateY(-1px); }
        .btn-add-game:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-clear { padding: 12px 24px; background: rgba(255,255,255,0.05); color: #a1a1aa; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-family: inherit; }
        .btn-clear:hover { background: rgba(255,255,255,0.1); color: #fff; }

        /* Info Box */
        .info-box { background: rgba(26,159,255,0.05); border: 1px solid rgba(26,159,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px; display: flex; gap: 12px; }
        .info-box.warning { background: rgba(245,158,11,0.05); border-color: rgba(245,158,11,0.1); }
        .info-box-icon { width: 24px; height: 24px; flex-shrink: 0; color: #1a9fff; }
        .info-box.warning .info-box-icon { color: #f59e0b; }
        .info-box-content { flex: 1; }
        .info-box-content h4 { font-size: 14px; color: #fff; margin-bottom: 4px; }
        .info-box-content p { font-size: 13px; color: #a1a1aa; line-height: 1.5; }
        .info-box-content a { color: #1a9fff; text-decoration: none; }
        .info-box-content a:hover { text-decoration: underline; }
        .info-box-content code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 12px; color: #e4e4e7; }

        /* Depot List */
        .depot-list { margin-top: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 12px; }
        .depot-item { display: flex; gap: 12px; align-items: center; margin-bottom: 8px; }
        .depot-item:last-child { margin-bottom: 0; }
        .depot-item input { flex: 1; }
        .depot-item .remove-depot { padding: 8px; background: rgba(239,68,68,0.1); border: none; border-radius: 6px; color: #f87171; cursor: pointer; }
        .add-depot-btn { margin-top: 12px; padding: 8px 16px; background: rgba(255,255,255,0.05); border: 1px dashed rgba(255,255,255,0.2); border-radius: 8px; color: #a1a1aa; cursor: pointer; font-size: 12px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 6px; }
        .add-depot-btn:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3); }

        .footer { position: relative; z-index: 10; text-align: center; padding: 30px; color: #3f3f46; font-size: 13px; border-top: 1px solid rgba(255,255,255,0.04); margin-top: 40px; }
        .footer a { color: #5865F2; text-decoration: none; }
        .footer a:hover { text-decoration: underline; }
        
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: rgba(16,185,129,0.95); color: white; padding: 14px 24px; border-radius: 10px; font-size: 14px; font-weight: 500; z-index: 1000; opacity: 0; transition: all 0.3s; display: flex; align-items: center; gap: 10px; max-width: 90%; }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .toast.error { background: rgba(239,68,68,0.95); }
        .toast.warning { background: rgba(245,158,11,0.95); }

        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); z-index: 1000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.show { display: flex; }
        .modal { background: #16161f; border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; max-width: 500px; width: 100%; padding: 28px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); animation: modalIn 0.3s ease; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95) translateY(-10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .modal-header { display: flex; align-items: center; gap: 14px; margin-bottom: 20px; }
        .modal-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .modal-icon.warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .modal-icon svg { width: 26px; height: 26px; }
        .modal-title { font-size: 18px; font-weight: 700; color: #fff; }
        .modal-subtitle { font-size: 12px; color: #71717a; margin-top: 2px; }
        .modal-body { margin-bottom: 24px; }
        .modal-body p { color: #a1a1aa; font-size: 14px; line-height: 1.6; margin-bottom: 12px; }
        .modal-body .game-name { color: #fff; font-weight: 600; }
        .drm-info { background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.2); border-radius: 8px; padding: 12px; margin-top: 16px; }
        .drm-info-title { font-size: 11px; color: #f59e0b; font-weight: 600; text-transform: uppercase; margin-bottom: 8px; }
        .drm-info-list { font-size: 12px; color: #a1a1aa; list-style: none; }
        .drm-info-list li { margin-bottom: 4px; display: flex; align-items: center; gap: 6px; }
        .drm-info-list li::before { content: '‚ö†'; font-size: 10px; }
        .discord-promo { background: rgba(88,101,242,0.1); border: 1px solid rgba(88,101,242,0.2); border-radius: 8px; padding: 12px; margin-top: 16px; display: flex; align-items: center; gap: 12px; }
        .discord-promo-icon { width: 36px; height: 36px; background: #5865F2; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .discord-promo-icon svg { width: 20px; height: 20px; fill: white; }
        .discord-promo-text { font-size: 12px; color: #a1a1aa; }
        .discord-promo-text a { color: #5865F2; font-weight: 600; text-decoration: none; }
        .modal-buttons { display: flex; gap: 12px; }
        .modal-btn { flex: 1; padding: 12px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; border: none; font-family: inherit; }
        .modal-btn-cancel { background: rgba(255,255,255,0.05); color: #a1a1aa; border: 1px solid rgba(255,255,255,0.1); }
        .modal-btn-cancel:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .modal-btn-confirm { background: linear-gradient(135deg, #f59e0b, #d97706); color: #000; }
        .modal-btn-confirm:hover { box-shadow: 0 4px 20px rgba(245,158,11,0.4); }

        @media (max-width: 768px) {
            .header { padding: 16px 20px; flex-wrap: wrap; gap: 12px; }
            .header-right { width: 100%; justify-content: center; }
            .main { padding: 40px 16px; }
            .hero h1 { font-size: 28px; }
            .tab-nav { flex-direction: column; }
            .tab-btn { justify-content: center; }
            .game-card { flex-direction: column; text-align: center; padding: 16px; }
            .game-info { text-align: center; }
            .game-title { justify-content: center; }
            .game-meta { justify-content: center; }
            .game-image, .game-image-placeholder { width: 100%; height: auto; aspect-ratio: 460/215; max-width: 200px; }
            .game-actions { justify-content: center; }
            .form-grid { grid-template-columns: 1fr; }
            .form-actions { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="bg-ambient"></div>
    
    <header class="header">
        <div class="logo">
            <div class="logo-icon">
                <svg viewBox="0 0 65 65"><path d="M32.5 0C14.6 0 0 14.6 0 32.5c0 15.9 11.5 29.1 26.6 31.8l12.2-17.4c5.5-.2 10.5-2.6 14.1-6.2 7.3-7.3 7.3-19.1 0-26.4-7.3-7.3-19.1-7.3-26.4 0-3.9 3.9-5.8 9.2-5.6 14.4L7.4 43.9C2.8 39.5 0 33.3 0 26.5 0 11.9 11.9 0 26.5 0h6zm10.7 21.1c4.9 0 8.9 4 8.9 8.9s-4 8.9-8.9 8.9-8.9-4-8.9-8.9 4-8.9 8.9-8.9z"/></svg>
            </div>
            <div class="logo-text">SMGEN</div>
        </div>
        <div class="header-right">
            <a href="https://discord.gg/pubslounge" target="_blank" class="discord-btn">
                <svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z" fill="currentColor"/></svg>
                Join Discord
            </a>
            <div class="vip-badge">Manifest Generator</div>
        </div>
    </header>

    <main class="main">
        <div class="hero">
            <h1>Steam Manifest Generator</h1>
            <p>Generate and download Steam manifests. Add your own games with real manifest data from SteamDB.</p>
        </div>

        <div class="stats">
            <div class="stat"><div class="stat-value" id="game-count">0</div><div class="stat-label">Total</div></div>
            <div class="stat"><div class="stat-value" id="available-count">0</div><div class="stat-label">Available</div></div>
            <div class="stat"><div class="stat-value" id="custom-count">0</div><div class="stat-label">Custom</div></div>
            <div class="stat"><div class="stat-value" id="download-count">0</div><div class="stat-label">Downloads</div></div>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" data-tab="browse">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                Browse Games
            </button>
            <button class="tab-btn" data-tab="add">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8m-4-4h8"/></svg>
                Add Custom Game
            </button>
        </div>

        <div class="tab-content active" id="tab-browse">
            <div class="search-container">
                <div class="search-box">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search games by name or App ID..." autocomplete="off">
                </div>
            </div>

            <div class="section-tabs" id="sectionTabs">
                <button class="section-tab active" data-section="all">All <span class="count" id="count-all">0</span></button>
                <button class="section-tab" data-section="valve">Valve <span class="count" id="count-valve">0</span></button>
                <button class="section-tab" data-section="denuvo">Denuvo <span class="count" id="count-denuvo">0</span></button>
                <button class="section-tab" data-section="drm-free">DRM-Free <span class="count" id="count-drm-free">0</span></button>
                <button class="section-tab" data-section="custom">My Games <span class="count" id="count-custom">0</span></button>
                <button class="section-tab" data-section="unavailable">Unavailable <span class="count" id="count-unavailable">0</span></button>
            </div>

            <div class="results-info" id="resultsInfo"></div>
            <div class="results" id="results"></div>
            <button class="load-more" id="loadMore" style="display:none;">Load More Games</button>
        </div>

        <div class="tab-content" id="tab-add">
            <div class="info-box">
                <svg class="info-box-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4m0-4h.01"/></svg>
                <div class="info-box-content">
                    <h4>How to get Manifest IDs</h4>
                    <p>Visit <a href="https://steamdb.info" target="_blank">SteamDB.info</a> ‚Üí Search for your game ‚Üí Go to "Depots" tab ‚Üí Copy the Depot ID and Manifest ID. Join our <a href="https://discord.gg/pubslounge" target="_blank">Discord</a> for help!</p>
                </div>
            </div>

            <div class="add-game-section">
                <div class="add-game-header">
                    <div class="icon">
                        <svg viewBox="0 0 24 24"><path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                    </div>
                    <h2>Add Custom Game</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Game Name *</label>
                        <input type="text" id="gameName" placeholder="e.g., Cyberpunk 2077">
                    </div>
                    <div class="form-group">
                        <label>App ID *</label>
                        <input type="text" id="appId" placeholder="e.g., 1091500">
                        <small>Find on SteamDB or the Steam store URL</small>
                    </div>
                    <div class="form-group">
                        <label>DRM Type</label>
                        <select id="drmType">
                            <option value="none">None / Unknown</option>
                            <option value="drm-free">DRM-Free</option>
                            <option value="denuvo">Denuvo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Depots & Manifests *</label>
                    <div class="depot-list" id="depotList">
                        <div class="depot-item">
                            <input type="text" placeholder="Depot ID (e.g., 1091501)" class="depot-id">
                            <input type="text" placeholder="Manifest ID (e.g., 7561906995606504576)" class="manifest-id">
                        </div>
                    </div>
                    <button type="button" class="add-depot-btn" id="addDepotBtn">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8m-4-4h8"/></svg>
                        Add Another Depot
                    </button>
                    <small style="display:block;margin-top:8px;">Most games have multiple depots. Check SteamDB for all required depots.</small>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-clear" id="clearFormBtn">Clear</button>
                    <button type="button" class="btn-add-game" id="addGameBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h20"/></svg>
                        Add Game
                    </button>
                </div>
            </div>

            <div class="info-box warning">
                <svg class="info-box-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><path d="M12 9v4m0 4h.01"/></svg>
                <div class="info-box-content">
                    <h4>Important Notes</h4>
                    <p>‚Ä¢ Manifest IDs change when games update - you may need to update them<br>
                    ‚Ä¢ Games requiring external launchers (Rockstar, EA, Ubisoft) won't work<br>
                    ‚Ä¢ Custom games are saved in your browser's local storage</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        SMGEN ¬∑ Need help? Join our <a href="https://discord.gg/pubslounge" target="_blank">Discord</a> ¬∑ Not affiliated with Steam or Valve
    </footer>

    <div class="toast" id="toast">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        <span id="toast-message">Success!</span>
    </div>

    <div class="modal-overlay" id="denuvoModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-icon warning">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2"><path d="M12 9v4m0 4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/></svg>
                </div>
                <div>
                    <div class="modal-title">DRM Protection Notice</div>
                    <div class="modal-subtitle">Please read before proceeding</div>
                </div>
            </div>
            <div class="modal-body">
                <p>You're about to download the manifest for <span class="game-name" id="modalGameName">Game</span>.</p>
                <div class="drm-info">
                    <div class="drm-info-title">‚ö†Ô∏è Protection Information</div>
                    <ul class="drm-info-list" id="modalDrmList">
                        <li>This game includes Denuvo Anti-Tamper technology</li>
                    </ul>
                </div>
                <div class="discord-promo">
                    <div class="discord-promo-icon">
                        <svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.36-.698.772-1.362 1.225-1.993a.076.076 0 0 0-.041-.107 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128c.12-.094.246-.194.373-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.3 12.3 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.84 19.84 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.06.06 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
                    </div>
                    <div class="discord-promo-text">
                        Need help? Join our <a href="https://discord.gg/pubslounge" target="_blank">Discord community</a>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="modalConfirmBtn">Download Anyway</button>
            </div>
        </div>
    </div>

    <script>
        // Default games with example data
        const defaultGames = [
            // VALVE GAMES
            { name: "Half-Life 2", appId: "220", publisher: "valve", drmFree: true, depots: [{ depotId: "221", manifestId: "5765982474774567843" }] },
            { name: "Portal", appId: "400", publisher: "valve", drmFree: true, depots: [{ depotId: "401", manifestId: "8437017866498802854" }] },
            { name: "Portal 2", appId: "620", publisher: "valve", drmFree: true, depots: [{ depotId: "621", manifestId: "2759529950541284022" }] },
            { name: "Counter-Strike 2", appId: "730", publisher: "valve", drmFree: true, depots: [{ depotId: "731", manifestId: "3922474738544255842" }] },
            { name: "Left 4 Dead 2", appId: "550", publisher: "valve", drmFree: true, depots: [{ depotId: "551", manifestId: "5146805690498828355" }] },
            { name: "Team Fortress 2", appId: "440", publisher: "valve", drmFree: true, depots: [{ depotId: "441", manifestId: "1628069673846571920" }] },
            { name: "Dota 2", appId: "570", publisher: "valve", drmFree: true, depots: [{ depotId: "571", manifestId: "6120486045822925539" }] },
            { name: "Half-Life: Alyx", appId: "546560", publisher: "valve", drmFree: true, depots: [{ depotId: "546561", manifestId: "5765209778498739498" }] },

            // EXAMPLE GAMES - Users should add their own with real manifest IDs
            { name: "Cyberpunk 2077", appId: "1091500", drmFree: true, verified: true, depots: [{ depotId: "1091501", manifestId: "7561906995606504576" }] },
            { name: "The Witcher 3", appId: "292030", drmFree: true, depots: [{ depotId: "292031", manifestId: "3268546929048208686" }] },
            { name: "Hollow Knight", appId: "367520", drmFree: true, depots: [{ depotId: "367521", manifestId: "3675898716091628957" }] },
            { name: "Hades", appId: "1145360", drmFree: true, depots: [{ depotId: "1145361", manifestId: "8641205937769751684" }] },
            { name: "Stardew Valley", appId: "413150", drmFree: true, depots: [{ depotId: "413151", manifestId: "3115112746481370098" }] },
            { name: "Terraria", appId: "105600", drmFree: true, depots: [{ depotId: "105601", manifestId: "3547156996054267962" }] },
            
            // DENUVO EXAMPLES
            { name: "Hogwarts Legacy", appId: "990080", denuvo: true, depots: [{ depotId: "990081", manifestId: "NEEDS_REAL_ID" }] },
            { name: "Elden Ring", appId: "1245620", denuvo: true, depots: [{ depotId: "1245621", manifestId: "NEEDS_REAL_ID" }] },
            
            // UNAVAILABLE
            { name: "Grand Theft Auto V", appId: "271590", unavailable: true, unavailableReason: "Requires Rockstar Launcher", depots: [] },
            { name: "Red Dead Redemption 2", appId: "1174180", unavailable: true, unavailableReason: "Requires Rockstar Launcher", depots: [] },
            { name: "EA Sports FC 25", appId: "2669320", unavailable: true, unavailableReason: "Requires EA App", depots: [] },
            { name: "Battlefield 2042", appId: "1517290", unavailable: true, unavailableReason: "Requires EA App", depots: [] },
            { name: "Assassin's Creed Mirage", appId: "2208920", unavailable: true, unavailableReason: "Requires Ubisoft Connect", depots: [] },
        ];

        // State
        let games = [];
        let customGames = [];
        let currentSection = 'all';
        let currentSearch = '';
        let displayCount = 50;
        let pendingDownload = null;

        // Load custom games from localStorage
        function loadCustomGames() {
            try {
                const saved = localStorage.getItem('smgenCustomGames');
                if (saved) {
                    customGames = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Error loading custom games:', e);
                customGames = [];
            }
        }

        // Save custom games to localStorage
        function saveCustomGames() {
            try {
                localStorage.setItem('smgenCustomGames', JSON.stringify(customGames));
            } catch (e) {
                console.error('Error saving custom games:', e);
            }
        }

        // Combine default and custom games
        function getAllGames() {
            return [...defaultGames, ...customGames.map(g => ({ ...g, isCustom: true }))];
        }

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const resultsContainer = document.getElementById('results');
        const resultsInfo = document.getElementById('resultsInfo');
        const loadMoreBtn = document.getElementById('loadMore');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const denuvoModal = document.getElementById('denuvoModal');
        const modalGameName = document.getElementById('modalGameName');
        const modalDrmList = document.getElementById('modalDrmList');
        const modalConfirmBtn = document.getElementById('modalConfirmBtn');

        function generateLuaContent(game) {
            let content = '';

            if (game.depots && game.depots.length > 0) {
                game.depots.forEach((d, index) => {
                    if (d.depotId && d.manifestId && d.manifestId !== 'NEEDS_REAL_ID') {
                        // Use Game Name for the first depot comment, "Depot X" for others to match style
                        const comment = index === 0 ? game.name : `Depot ${d.depotId}`;
                        content += `addappid(${d.depotId}, 1, "${d.manifestId}") -- ${comment}\n`;
                    }
                });
            }
            
            content += `\n-- Made with love by LightningFast‚ö°üíú`;
            
            return content;
        }

        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.className = 'toast show';
            if (type === 'error') toast.classList.add('error');
            if (type === 'warning') toast.classList.add('warning');
            setTimeout(() => toast.classList.remove('show', 'error', 'warning'), 3000);
        }

        function showModal(game, index) {
            pendingDownload = { game, index };
            modalGameName.textContent = game.name;
            
            let drmItems = [];
            if (game.denuvo) drmItems.push('This game includes Denuvo Anti-Tamper technology');
            if (!game.depots || game.depots.length === 0 || game.depots.some(d => d.manifestId === 'NEEDS_REAL_ID')) {
                drmItems.push('Manifest IDs may need to be updated - check SteamDB');
            }
            
            modalDrmList.innerHTML = drmItems.map(item => `<li>${item}</li>`).join('');
            denuvoModal.classList.add('show');
        }

        function closeModal() {
            denuvoModal.classList.remove('show');
            pendingDownload = null;
        }

        function confirmDownload() {
            if (pendingDownload) {
                executeDownload(pendingDownload.game, pendingDownload.index);
                closeModal();
            }
        }

        function executeDownload(game, index) {
            // Check if manifest IDs are valid
            if (!game.depots || game.depots.length === 0) {
                showToast('No depot data available for this game', 'error');
                return;
            }
            
            if (game.depots.some(d => d.manifestId === 'NEEDS_REAL_ID')) {
                showToast('This game needs real manifest IDs from SteamDB', 'warning');
                return;
            }

            const btn = document.querySelector(`[data-index="${index}"]`);
            if (btn) {
                btn.disabled = true;
                btn.innerHTML = '<div class="spinner"></div>';
            }

            setTimeout(() => {
                const content = generateLuaContent(game);
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${game.appId}.lua`;
                a.click();
                URL.revokeObjectURL(url);

                incrementDownload();
                showToast(`${game.name} manifest downloaded!`);

                if (btn) {
                    btn.classList.add('success');
                    btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Done';
                    setTimeout(() => {
                        btn.disabled = false;
                        btn.classList.remove('success');
                        renderResults();
                    }, 2000);
                }
            }, 300);
        }

        function downloadManifest(index) {
            const allGames = getAllGames();
            const game = allGames[index];
            if (!game) return;

            if (game.unavailable) {
                showToast(game.unavailableReason, 'error');
                return;
            }

            if (game.denuvo || (game.depots && game.depots.some(d => d.manifestId === 'NEEDS_REAL_ID'))) {
                showModal(game, index);
            } else {
                executeDownload(game, index);
            }
        }

        function deleteCustomGame(index) {
            const allGames = getAllGames();
            const game = allGames[index];
            if (!game || !game.isCustom) return;
            
            const customIndex = customGames.findIndex(g => g.appId === game.appId);
            if (customIndex !== -1) {
                customGames.splice(customIndex, 1);
                saveCustomGames();
                showToast(`${game.name} removed`);
                updateCounts();
                renderResults();
            }
        }

        function getDownloadCount() {
            return parseInt(localStorage.getItem('smgenDownloads') || '0');
        }

        function incrementDownload() {
            const count = getDownloadCount() + 1;
            localStorage.setItem('smgenDownloads', count.toString());
            document.getElementById('download-count').textContent = count;
        }

        function getGameImage(appId) {
            return `https://cdn.akamai.steamstatic.com/steam/apps/${appId}/capsule_231x87.jpg`;
        }

        function filterGames() {
            const allGames = getAllGames();
            let filtered = allGames;
            
            if (currentSection !== 'all') {
                if (currentSection === 'valve') filtered = allGames.filter(g => g.publisher === 'valve');
                else if (currentSection === 'denuvo') filtered = allGames.filter(g => g.denuvo && !g.unavailable);
                else if (currentSection === 'drm-free') filtered = allGames.filter(g => g.drmFree && !g.unavailable);
                else if (currentSection === 'custom') filtered = allGames.filter(g => g.isCustom);
                else if (currentSection === 'unavailable') filtered = allGames.filter(g => g.unavailable);
            }
            
            if (currentSearch) {
                const search = currentSearch.toLowerCase();
                filtered = filtered.filter(g => g.name.toLowerCase().includes(search) || g.appId.includes(search));
            }
            
            return filtered;
        }

        function renderGameCard(game, index) {
            const isUnavailable = game.unavailable;
            const needsManifest = game.depots && game.depots.some(d => d.manifestId === 'NEEDS_REAL_ID');
            const cardClasses = ['game-card'];
            
            if (isUnavailable) cardClasses.push('unavailable');
            if (game.denuvo && !isUnavailable) cardClasses.push('denuvo-game');
            if (game.publisher === 'valve') cardClasses.push('valve-game');
            if (game.drmFree && !isUnavailable && !game.publisher) cardClasses.push('drm-free-game');
            if (game.isCustom) cardClasses.push('custom-game');

            let badges = '';
            if (game.publisher === 'valve') badges += '<span class="badge badge-valve">VALVE</span>';
            if (game.denuvo) badges += '<span class="badge badge-denuvo">DENUVO</span>';
            if (game.drmFree && !game.publisher) badges += '<span class="badge badge-drm-free">DRM-FREE</span>';
            if (game.isCustom) badges += '<span class="badge badge-custom">CUSTOM</span>';
            if (game.verified) badges += '<span class="badge badge-verified">VERIFIED</span>';
            if (isUnavailable) badges += '<span class="badge badge-unavailable">UNAVAILABLE</span>';

            let btnClass = 'download-btn';
            if (isUnavailable || needsManifest) btnClass += ' unavailable-btn';
            else if (game.denuvo) btnClass += ' denuvo-btn';

            let btnContent = '';
            if (isUnavailable) {
                btnContent = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg> N/A';
            } else if (needsManifest) {
                btnContent = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 9v4m0 4h.01"/><circle cx="12" cy="12" r="10"/></svg> Need ID';
            } else {
                btnContent = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Download';
            }

            let extraInfo = '';
            if (isUnavailable) extraInfo = `<span style="color:#f87171;font-size:10px;">${game.unavailableReason}</span>`;
            else if (needsManifest) extraInfo = '<span style="color:#f59e0b;font-size:10px;">Needs manifest from SteamDB</span>';

            return `
                <div class="${cardClasses.join(' ')}">
                    <div class="game-image-container">
                        <img class="game-image" src="${getGameImage(game.appId)}" alt="${game.name}" onerror="this.outerHTML='<div class=\\'game-image-placeholder\\'>${game.name}</div>'">
                        ${isUnavailable ? '<div class="unavailable-overlay"><span class="unavailable-badge-img">Unavailable</span></div>' : ''}
                    </div>
                    <div class="game-info">
                        <div class="game-title">${game.name}<div class="game-badges">${badges}</div></div>
                        <div class="game-meta">
                            <span>App ID: <span class="meta-value">${game.appId}</span></span>
                            ${game.depots && game.depots.length > 0 ? `<span>Depots: <span class="meta-value">${game.depots.length}</span></span>` : ''}
                            ${extraInfo}
                        </div>
                    </div>
                    <div class="game-actions">
                        <button class="${btnClass}" data-index="${index}" onclick="${isUnavailable ? `showToast('${game.unavailableReason}', 'error')` : `downloadManifest(${index})`}">
                            ${btnContent}
                        </button>
                        ${game.isCustom ? `<button class="delete-btn" onclick="deleteCustomGame(${index})" title="Remove"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button>` : ''}
                    </div>
                </div>
            `;
        }

        function renderResults() {
            const filtered = filterGames();
            const allGames = getAllGames();
            const toShow = filtered.slice(0, displayCount);

            if (toShow.length === 0) {
                resultsContainer.innerHTML = '<div class="no-results"><div style="font-size:48px;opacity:0.5;margin-bottom:16px;">üîç</div><p>No games found. Try adding a custom game!</p></div>';
                resultsInfo.innerHTML = '';
                loadMoreBtn.style.display = 'none';
                return;
            }

            resultsInfo.innerHTML = `Showing <strong>${toShow.length}</strong> of <strong>${filtered.length}</strong> games`;
            resultsContainer.innerHTML = toShow.map((g, i) => {
                const originalIndex = allGames.indexOf(g);
                return renderGameCard(g, originalIndex);
            }).join('');

            loadMoreBtn.style.display = toShow.length < filtered.length ? 'block' : 'none';
        }

        function updateCounts() {
            const allGames = getAllGames();
            const total = allGames.length;
            const available = allGames.filter(g => !g.unavailable).length;
            const custom = customGames.length;
            const denuvo = allGames.filter(g => g.denuvo && !g.unavailable).length;
            const drmFree = allGames.filter(g => g.drmFree && !g.unavailable).length;
            const valve = allGames.filter(g => g.publisher === 'valve').length;
            const unavailable = allGames.filter(g => g.unavailable).length;

            document.getElementById('game-count').textContent = total;
            document.getElementById('available-count').textContent = available;
            document.getElementById('custom-count').textContent = custom;
            document.getElementById('download-count').textContent = getDownloadCount();

            document.getElementById('count-all').textContent = total;
            document.getElementById('count-valve').textContent = valve;
            document.getElementById('count-denuvo').textContent = denuvo;
            document.getElementById('count-drm-free').textContent = drmFree;
            document.getElementById('count-custom').textContent = custom;
            document.getElementById('count-unavailable').textContent = unavailable;
        }

        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(`tab-${btn.dataset.tab}`).classList.add('active');
            });
        });

        // Section filtering
        document.querySelectorAll('.section-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentSection = tab.dataset.section;
                displayCount = 50;
                renderResults();
            });
        });

        // Search
        searchInput.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            displayCount = 50;
            renderResults();
        });

        // Load more
        loadMoreBtn.addEventListener('click', () => {
            displayCount += 50;
            renderResults();
        });

        // Modal
        modalConfirmBtn.addEventListener('click', confirmDownload);
        denuvoModal.addEventListener('click', (e) => { if (e.target === denuvoModal) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

        // Add depot button
        document.getElementById('addDepotBtn').addEventListener('click', () => {
            const depotList = document.getElementById('depotList');
            const newDepot = document.createElement('div');
            newDepot.className = 'depot-item';
            newDepot.innerHTML = `
                <input type="text" placeholder="Depot ID" class="depot-id">
                <input type="text" placeholder="Manifest ID" class="manifest-id">
                <button type="button" class="remove-depot" onclick="this.parentElement.remove()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            `;
            depotList.appendChild(newDepot);
        });

        // Clear form
        document.getElementById('clearFormBtn').addEventListener('click', () => {
            document.getElementById('gameName').value = '';
            document.getElementById('appId').value = '';
            document.getElementById('drmType').value = 'none';
            document.getElementById('depotList').innerHTML = `
                <div class="depot-item">
                    <input type="text" placeholder="Depot ID (e.g., 1091501)" class="depot-id">
                    <input type="text" placeholder="Manifest ID (e.g., 7561906995606504576)" class="manifest-id">
                </div>
            `;
        });

        // Add game
        document.getElementById('addGameBtn').addEventListener('click', () => {
            const name = document.getElementById('gameName').value.trim();
            const appId = document.getElementById('appId').value.trim();
            const drmType = document.getElementById('drmType').value;
            
            if (!name || !appId) {
                showToast('Please enter game name and App ID', 'error');
                return;
            }

            // Check if already exists
            if (getAllGames().some(g => g.appId === appId)) {
                showToast('A game with this App ID already exists', 'error');
                return;
            }

            // Get depots
            const depotItems = document.querySelectorAll('.depot-item');
            const depots = [];
            depotItems.forEach(item => {
                const depotId = item.querySelector('.depot-id').value.trim();
                const manifestId = item.querySelector('.manifest-id').value.trim();
                if (depotId && manifestId) {
                    depots.push({ depotId, manifestId });
                }
            });

            if (depots.length === 0) {
                showToast('Please add at least one depot with manifest ID', 'error');
                return;
            }

            const newGame = {
                name,
                appId,
                depots,
                drmFree: drmType === 'drm-free',
                denuvo: drmType === 'denuvo'
            };

            customGames.push(newGame);
            saveCustomGames();
            
            showToast(`${name} added successfully!`);
            document.getElementById('clearFormBtn').click();
            
            // Switch to browse tab and show custom section
            document.querySelector('[data-tab="browse"]').click();
            document.querySelector('[data-section="custom"]').click();
            
            updateCounts();
            renderResults();
        });

        // Initialize
        loadCustomGames();
        updateCounts();
        renderResults();
    </script>
</body>
</html>
